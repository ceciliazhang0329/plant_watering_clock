<div>
  <div>
    <h1>
      List of all plants
    </h1>
  </div>
</div>

<hr>

<div>
  <div>
    <h2>
      Add a new plant
    </h2>

    <form action="/insert_plant" method="post">
      <div>
        <label for="plant_name_box">
          Plant name
        </label>

        <input type="text" id="plant_name_box" name="query_plant_name">
      </div>

      <div>
        <label for="last_watered_date_box">
          Last watered date
        </label>

        <input type="date" id="last_watered_date_box" name="query_last_watered_date">
      </div>

      <button>
        Create plant
      </button>
    </form>
  </div>
</div>

<hr>
<div>
  <div>
    <table border="1">
      <tr>
        <th>
          ID
        </th>

        <th>
          User
        </th>

        <th>
          Plant name
        </th>

        <th>
          Last watered date
        </th>

        <th>
          Watering frequency
        </th>

        <th>
          Sunlight requirement
        </th>

        <th>
          Soil type
        </th>

        <th>
          Other tips
        </th>

        <th>
          Created at
        </th>

        <th>
          Updated at
        </th>

        <th>
        </th>
      </tr>

      <% @list_of_plants.each do |a_plant| %>
      <tr>
        <td>
          <%= a_plant.id %>
        </td>

        <td>
          <%= a_plant.user_id %>
        </td>

        <td>
          <%= a_plant.plant_name %>
        </td>

        <td>
          <%= a_plant.last_watered_date %>
        </td>

        <td>
          <%= a_plant.watering_frequency %>
        </td>

        <td>
          <%= a_plant.sunlight_requirement %>
        </td>

        <td>
          <%= a_plant.soil_type %>
        </td>

        <td>
          <%= a_plant.other_tips %>
        </td>

        <td>
          <%= time_ago_in_words(a_plant.created_at) %> ago
        </td>
        <td>
          <%= time_ago_in_words(a_plant.updated_at) %> ago
        </td>

        <td>
          <a href="/plants/<%= a_plant.id %>">
            Show details
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>

<hr>

<%# Define a function to render the plant table %>
<% def render_plant_table(plants, title) %>
  <h2><%= title %></h2>
  <% if plants.present? && plants.any? %>
    <table>
      <!-- Table headers and structure -->
      <thead>
        <tr>
          <th>Name</th>
          <th>Last Watered Date</th>
          <th>Watering Frequency</th>
        </tr>
      </thead>
      <tbody>
        <% plants.each do |plant| %>
          <tr>
            <td><%= plant.plant_name %></td>
            <td><%= plant.last_watered_date %></td>
            <td><%= plant.watering_frequency %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p>No plants in this category.</p>
  <% end %>
<% end %>

<%# Call the function for each section using @list_of_plants %>
<%= raw render_plant_table(@overdue_plants, "Overdue Watering") %>
<%= raw render_plant_table(@today_water_plants, "Today's Watering") %>
<%= raw render_plant_table(@no_need_for_water_plants, "No Watering Needed Today") %>
<%= raw render_plant_table(@no_water_info_plants, "No Frequency Info") %>

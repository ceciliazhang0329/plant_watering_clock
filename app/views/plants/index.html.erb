<div class="m-3 text-center">
  <div>
    <h1>
      Which plant to water?
    </h1>
  </div>
</div>

<%# Define a function to render plant information as cards %>
<div class="m-3">
  <% def render_plant_cards(plants, title, card_color) %>
    <h2 class="m-3"><%= title %></h2>
    <div class="row m-3">
      <% if plants.present? && plants.any? %>
        <% plants.each do |plant| %>
          <div class="col-md-4 mb-3">
            <div class="card text-white <%= card_color %>">
              <div class="card-header d-flex justify-content-between align-items-center">
                <h4 class="card-title"><%= plant.plant_name %></h4>
                <a href="/plants/<%= plant.id %>" class="text-white">
                  Edit
                </a>
              </div>
              <div class="card-body">
                <p class="card-title"><strong>Last Watered: </strong><%= plant.last_watered_date %></p>
                <p class="card-text"><strong>Watering Frequency: </strong><%= plant.watering_frequency %> days</p>
                <p class="card-text"><strong>Sunlight Requirement: </strong><%= plant.sunlight_requirement %></p>
                <p class="card-text"><strong>Soil type: </strong><%= plant.soil_type %></p>
                <p class="card-text"><strong>Other tips: </strong><%= plant.other_tips %></p>
              </div>
            </div>
          </div>
        <% end %>
      <% else %>
        <p>No plants in this category.</p>
      <% end %>
    </div>
  <% end %>
</div>

<%# Call the function for each category using plant data %>
<%= raw render_plant_cards(@overdue_plants, "Overdue Watering", "bg-primary") %>
<%= raw render_plant_cards(@today_water_plants, "Today's Watering", "bg-danger") %>
<%= raw render_plant_cards(@no_need_for_water_plants, "No Watering Needed Today", "bg-success") %>
<%= raw render_plant_cards(@no_frequency_info_plants, "No Frequency Info", "bg-secondary") %>

<hr>
<div>
  <div>
    <table border="1">
      <tr>
        <th>
          ID
        </th>

        <th>
          User
        </th>

        <th>
          Plant name
        </th>

        <th>
          Last watered date
        </th>

        <th>
          Watering frequency
        </th>

        <th>
          Sunlight requirement
        </th>

        <th>
          Soil type
        </th>

        <th>
          Other tips
        </th>

        <th>
          Created at
        </th>

        <th>
          Updated at
        </th>

        <th>
        </th>
      </tr>

      <% @list_of_plants.each do |a_plant| %>
      <tr>
        <td>
          <%= a_plant.id %>
        </td>

        <td>
          <%= a_plant.user_id %>
        </td>

        <td>
          <%= a_plant.plant_name %>
        </td>

        <td>
          <%= a_plant.last_watered_date %>
        </td>

        <td>
          <%= a_plant.watering_frequency %>
        </td>

        <td>
          <%= a_plant.sunlight_requirement %>
        </td>

        <td>
          <%= a_plant.soil_type %>
        </td>

        <td>
          <%= a_plant.other_tips %>
        </td>

        <td>
          <%= time_ago_in_words(a_plant.created_at) %> ago
        </td>
        <td>
          <%= time_ago_in_words(a_plant.updated_at) %> ago
        </td>

        <td>
          <a href="/plants/<%= a_plant.id %>">
            Show details
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
